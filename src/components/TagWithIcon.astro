---
import type { Tag } from '~/utils/getTags';
import { tagIcons } from '~/utils/tagIcons';

export interface Props {
  tag: Tag;
}

const { tag } = Astro.props;
const randomIdx = Math.floor(Math.random() * tagIcons.other.length);
const icon =
  tagIcons[tag.name as keyof typeof tagIcons] ?? tagIcons.other[randomIdx];
---

<li>
  <a
    href={`/tags/${tag.name.toLowerCase()}`}
    transition:name={tag.name.toLowerCase()}
    data-test-id="tag"
    class="flex flex-col gap-2 group"
  >
    <div
      class="border rounded-lg border-inherit h-24 w-24 flex items-center justify-center hover:bg-custom-card/90"
    >
      <Fragment set:html={icon} />
    </div>
    <span
      class="max-w-24 group-hover:underline group-hover:decoration-dashed group-hover:text-custom-accent"
      >{tag.name.toLowerCase()}({tag.postsCount})</span
    >
  </a>
</li>
